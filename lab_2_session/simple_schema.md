## 1. Установление сеансового соединения (A — инициатор, B — отвечающая)
| Этап | Примитив                                                               | Направление                    | Описание                                                                                                       |
| ---- | ---------------------------------------------------------------------- | ------------------------------ | -------------------------------------------------------------------------------------------------------------- |
| 1    | S_CONNECT.REQ(address, quality{Защита=1, ГлСинх=0}, demand{маркеры=1}) | Приложение A → Сеанс A (вниз)  | Инициатор запрашивает сеансовое соединение с включённой защитой; маркеры данных и синхронизации у инициатора.  |
| 2    | T_CONNECT.REQ(address)                                                 | Сеанс A → Транспорт A (вниз)   | Старт установления транспортного соединения.                                                                   |
| 3    | T_CONNECT.IND(address)                                                 | Транспорт B → Сеанс B (вверх)  | На стороне B пришла индикация попытки соединения.                                                              |
| 4    | S_CONNECT.IND(address, quality, demand)                                | Сеанс B → Приложение B (вверх) | Индикация входящего сеансового соединения.                                                                     |
| 5    | S_CONNECT.RESP(address, quality)                                       | Приложение B → Сеанс B (вниз)  | Приложение B принимает соединение.                                                                             |
| 6    | T_CONNECT.RESP(address)                                                | Сеанс B → Транспорт B (вниз)   | Ответ на входящее T_CONNECT.IND.                                                                               |
| 7    | T_CONNECT.CONF(address)                                                | Транспорт A → Сеанс A (вверх)  | Подтверждение установления транспорта на стороне A.                                                            |
| 8    | S_CONNECT.CONF(quality)                                                | Сеанс A → Приложение A (вверх) | Подтверждение установления сеансового соединения.                                                              |

## 2. Передача одного блока данных
| Этап | Примитив              | Направление                    | Описание                                                  |
| ---- | --------------------- | ------------------------------ | --------------------------------------------------------- |
| 1    | S_DATA.REQ(userdata)  | Приложение A → Сеанс A (вниз)  | Приложение просит передать данные.                        |
| 2    | T_DATA.REQ(userdata’) | Сеанс A → Транспорт A (вниз)   | Сеанс (с защитой) оборачивает и отправляет на транспорт.  |
| 3    | T_DATA.IND(userdata’) | Транспорт B → Сеанс B (вверх)  | Данные пришли на стороне B.                               |
| 4    | S_DATA.IND(userdata)  | Сеанс B → Приложение B (вверх) | Индикация блока данных приложению B.                      |

## 3. Упорядоченный разрыв соединения
| Этап | Примитив                  | Направление                    | Описание                                              |
| ---- | ------------------------- | ------------------------------ | ----------------------------------------------------- |
| 1    | S_RELEASE.REQ             | Приложение A → Сеанс A (вниз)  | Инициатор запрашивает корректный разрыв.              |
| 2    | T_DISCONNECT.REQ(address) | Сеанс A → Транспорт A (вниз)   | Отправка запроса на разрыв транспортного соединения.  |
| 3    | T_DISCONNECT.IND          | Транспорт B → Сеанс B (вверх)  | Индикация разрыва на стороне B.                       |
| 4    | S_RELEASE.IND             | Сеанс B → Приложение B (вверх) | Индикация упорядоченного разрыва приложению B.        |
| 5    | S_RELEASE.RESP            | Приложение B → Сеанс B (вниз)  | Подтверждение со стороны приложения B.                |
| 6    | S_RELEASE.CONF            | Сеанс A → Приложение A (вверх) | Подтверждение завершения разрыва на стороне A.        |

## 4. Вариант с потерей пакета при соединении (ретрансляция)
| Этап | Примитив                                        | Направление                  | Описание                                                                                                   |
| ---- | ----------------------------------------------- | ---------------------------- | ---------------------------------------------------------------------------------------------------------- |
| 1    | T_CONNECT.REQ(address)                          | Сеанс A → Транспорт A (вниз) | Первый запрос уходит, **теряется** в сети.                                                                 |
| 2    | (таймер сеанса A)                               | локально на Сеанс A          | По истечении таймера допустима **одна** ретрансляция в рамках «потеря ≤1; защита есть; доступны таймеры».  |
| 3    | T_CONNECT.REQ(address) [повтор]                 | Сеанс A → Транспорт A (вниз) | Повторная отправка запроса.                                                                                |
| 4    | T_CONNECT.IND / T_CONNECT.RESP / T_CONNECT.CONF | Между B и A, как в фазе 1    | Соединение успешно заканчивается шагами 3–8 из фазы 1.                                                     |

## 5. Вариант с потерей пакета данных (без искажений)
| Этап | Примитив              | Направление                    | Описание                                                                                 |
| ---- | --------------------- | ------------------------------ | ---------------------------------------------------------------------------------------- |
| 1    | T_DATA.REQ(userdata’) | Сеанс A → Транспорт A (вниз)   | Передаём блок данных.                                                                    |
| 2    | (потеря N_DATA)       | сеть                           | Блок теряется; «искажений 0» сохраняется. Лимит сервиса: «потеря ≤1; доступны таймеры».  |
| 3    | (таймер сеанса A)     | локально на Сеанс A            | По таймеру выполняем **одну** повторную отправку T_DATA.REQ.                             |
| 4    | T_DATA.IND(userdata’) | Транспорт B → Сеанс B (вверх)  | Данные доходят на B.                                                                     |
| 5    | S_DATA.IND(userdata)  | Сеанс B → Приложение B (вверх) | Приложение B получает **один** раз; дубликаты фильтруются логикой защиты сеанса.         |
