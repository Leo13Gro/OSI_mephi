# Простейшая схема
## Участники
| Уровень                                    | Что делает                                                             |
| ------------------------------------------ | ---------------------------------------------------------------------- |
| **Сеансовый уровень**                      | Посылает запросы (`T_CONNECT.REQ`, `T_DATA.REQ`, `T_DISCONNECT.REQ`)   |
| **Транспортный уровень (твоя реализация)** | Реализует логику соединения и пересылку через сетевой уровень          |
| **Сетевой уровень (эмулятор)**             | Передает пакеты (`N_DATAGRAM.REQ` / `IND`) без установления соединения |

## Простейший сценарий событий
### 1. Установление соединения

| Этап | Примитив                                        | Направление                       | Описание                                              |
| ---- | ----------------------------------------------- | --------------------------------- | ----------------------------------------------------- |
| 1    | `T_CONNECT.REQ(address_B)`                      | от сеансового A к транспортному A | Сеанс A хочет соединиться с B                         |
| 2    | `N_DATAGRAM.REQ(address_B, userdata="CONNECT")` | от транспортного A к сетевому     | A шлет пакет «CONNECT»                                |
| 3    | `N_DATAGRAM.IND(address_A, userdata="CONNECT")` | от сетевого к транспортному B     | B получает запрос                                     |
| 4    | `T_CONNECT.IND(address_A)`                      | от транспортного B вверх          | B сообщает сеансовому уровню, что A хочет соединиться |
| 5    | `T_CONNECT.RESP(address_A)`                     | от сеансового B вниз              | B соглашается на соединение                           |
| 6    | `N_DATAGRAM.REQ(address_A, userdata="ACCEPT")`  | от транспортного B к сетевому     | B отправляет подтверждение                            |
| 7    | `N_DATAGRAM.IND(address_B, userdata="ACCEPT")`  | от сетевого к транспортному A     | A получает подтверждение                              |
| 8    | `T_CONNECT.CONF(address_B)`                     | от транспортного A вверх          | A уведомляет о подтверждении соединения               |


### 2. Передача данных

| Этап | Примитив                                               | Направление                  | Описание                           |
| ---- | ------------------------------------------------------ | ---------------------------- | ---------------------------------- |
| 1    | `T_DATA.REQ(userdata)`                                 | от сеансового A вниз         | Сеансовый A хочет отправить данные |
| 2    | `N_DATAGRAM.REQ(address_B, userdata="DATA:<payload>")` | транспортный A → сетевой     | A шлет пакет с данными             |
| 3    | `N_DATAGRAM.IND(address_A, userdata="DATA:<payload>")` | сетевой → транспортный B     | B получает данные                  |
| 4    | `T_DATA.IND(userdata)`                                 | транспортный B → сеансовый B | B передает данные наверх           |

### 3. Разрыв соединения

| Этап | Примитив                                           | Направление                  | Описание                   |
| ---- | -------------------------------------------------- | ---------------------------- | -------------------------- |
| 1    | `T_DISCONNECT.REQ(address_B)`                      | от сеансового A вниз         | A хочет закрыть соединение |
| 2    | `N_DATAGRAM.REQ(address_B, userdata="DISCONNECT")` | транспортный A → сетевой     | Отправляем пакет разрыва   |
| 3    | `N_DATAGRAM.IND(address_A, userdata="DISCONNECT")` | сетевой → транспортный B     | B получает уведомление     |
| 4    | `T_DISCONNECT.IND()`                               | транспортный B → сеансовый B | Соединение закрыто         |
